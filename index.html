<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Your Construct 2 Game</title>
  <style>
    /* Remove scrollbars and fill viewport */
    html, body {
      margin: 0;
      padding: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      background: #000; /* optional: background color */
    }

    /* Canvas container fullscreen */
    #c2canvasdiv {
      width: 100vw !important;
      height: 100vh !important;
      margin: 0 !important;
      padding: 0 !important;
    }

    /* Canvas takes full container */
    #c2canvas {
      width: 100% !important;
      height: 100% !important;
      display: block;
    }

    #button {
      display: none;
    }
  </style>
</head>
<body>

  <!-- Construct 2 game container -->
  <div id="c2canvasdiv">
    <canvas id="c2canvas">
      <h1>Your browser does not support HTML5. Please upgrade your browser.</h1>
    </canvas>
  </div>

  <!-- Scripts required by Construct 2 game -->
  <script src="https://cdn.jsdelivr.net/gh/bubbls/ruffle@a25d711e6294241dd4ad89f5ef65dc6bf34fcb24/offlineclient.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/bubbls/ruffle@a25d711e6294241dd4ad89f5ef65dc6bf34fcb24/2.1min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/bubbls/ruffle@a25d711e6294241dd4ad89f5ef65dc6bf34fcb24/runtime.js"></script>

  <!-- Initialize Construct 2 runtime -->
  <script>
    // Start the Construct 2 project when page is ready
    jQuery(document).ready(function () {
      cr_createRuntime("c2canvas");
    });

    // Pause/resume when page visibility changes
    function onVisibilityChanged() {
      if (document.hidden || document.mozHidden || document.webkitHidden || document.msHidden)
        cr_setSuspended(true);
      else
        cr_setSuspended(false);
    }
    document.addEventListener("visibilitychange", onVisibilityChanged, false);
    document.addEventListener("mozvisibilitychange", onVisibilityChanged, false);
    document.addEventListener("webkitvisibilitychange", onVisibilityChanged, false);
    document.addEventListener("msvisibilitychange", onVisibilityChanged, false);

    // Service worker registration for offline caching
    window.C2_RegisterSW = function C2_RegisterSW() {
      if (!navigator.serviceWorker) return;
      try {
        navigator.serviceWorker.register("sw.js", { scope: "./" })
        .then(function (reg) {
          console.log("Registered service worker on " + reg.scope);
        })
        .catch(function(e) { console.warn("Failed to register service worker:", e); });
      } catch(e) { console.warn("Failed to register service worker:", e); }
    };
  </script>

</body>
</html>
